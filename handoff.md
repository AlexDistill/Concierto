# Concierto Add-Ons Handoff

This package contains utilities and templates to extend Concierto with an Atom Bus,
Prompt Kitchen, Preview UI, and Logo SVG scaffolder.

## Folder structure

- `analysis/inspo_context.py`  
  Merges per-image analysis JSON into `atoms/merged.json`. Canonicalizes tags,
  clusters palettes, weights tokens. Input: descriptors from inspiration images.

- `atoms/`  
  Holds `merged.json` generated by the analysis script.

- `compose/prompt_kitchen.py`  
  Composes 3 prompt variants (`faithful`, `exploratory`, `weird`) for each deliverable,
  blending brand_concept, territory, brand_system, expression_matrix, and atoms.

- `compose/templates/*.jinja.txt`  
  Jinja prompt templates for deliverables (`product_card`, `poster_A1`, `marketing_lp_hero`,
  `social_story_set`, `logo_concept_directions`). Add more templates here.

- `render/svg_logo_scaffolder.py`  
  Turns a directions JSON (with `svg_plan`) into rough SVG logos.

- `ui/atoms_preview.py`  
  Generates an HTML preview of `atoms/merged.json` for QA of palettes, tags, objects, provenance.

- `README.txt`  
  General usage notes.

- `handoff.md`  
  This file: high-level context and usage instructions for continuation.

## Workflow

1. **Merge inspiration atoms**
   ```bash
   python analysis/inspo_context.py --inputs content/analysis/*.json --out atoms/merged.json
   ```

2. **Preview atoms**
   ```bash
   python ui/atoms_preview.py --atoms atoms/merged.json --out ui/atoms_preview.html
   ```

3. **Compose prompts for a deliverable**
   ```bash
   python compose/prompt_kitchen.py      --concept path/to/brand_concept.json      --territory path/to/territory.json      --system path/to/brand_system.json      --expr path/to/expression_matrix.json      --atoms atoms/merged.json      --deliverable product_card      --templates compose/templates      --outdir outputs/prompts
   ```

4. **Logo generation**
   - Use `logo_concept_directions.jinja.txt` to generate a JSON directions file via an LLM.
   - Save as `outputs/logo/directions.json`.
   - Run scaffolder:
     ```bash
     python render/svg_logo_scaffolder.py --directions outputs/logo/directions.json --outdir outputs/logo_svgs
     ```

## Key Points

- **Inputs expected:** brand_concept.json, territory.json, brand_system.json, expression_matrix.json, atoms/merged.json.  
- **Outputs:** prompt text files for image/UI generation, plus optional SVG scaffolds for logos.  
- **Variants:** each deliverable generates 3: faithful / exploratory / weird.  
- **Extending:** add new deliverables by dropping a template in `compose/templates`.  

This handoff should let you continue extending the system with more deliverables,
UI renderers, and integrations with downstream image/video generation tools.
